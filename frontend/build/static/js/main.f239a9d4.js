/*! For license information please see main.f239a9d4.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,s)=>{var n=s(853),r=s(43),a=s(950);function i(e){var t="https://cd2332d5-5a25-473f-9b89-d67786d83b0b.preview.emergentagent.com","/api");let Ex,_x,Ax,Ix,Tx;try{Ex=gt(jx),wx.enabled&&(_x=function(e,t){const s="object"==typeof e?e:ft(),n="string"==typeof e?e:t||Bn,r=ut(s,"firestore").getImmediate({identifier:n});if(!r._initialized){const e=E("firestore");e&&jo(r,...e)}return r}(Ex)),Nx.enabled&&(Ax=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();const t=ut(e,"auth");if(t.isInitialized())return t.getImmediate();const s=function(e,t){const s=ut(e,"auth");if(s.isInitialized()){const e=s.getImmediate();if(G(s.getOptions(),null!==t&&void 0!==t?t:{}))return e;Xo(e,"already-initialized")}return s.initialize({options:t})}(e,{popupRedirectResolver:au,persistence:[xd,Jc,ed]}),n=A("authTokenSyncURL");if(n&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(n,location.origin);if(location.origin===e.origin){const t=(r=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),s=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>cu)return;const n=null===t||void 0===t?void 0:t.token;du!==n&&(du=n,await fetch(r,{method:n?"POST":"DELETE",headers:n?{Authorization:"Bearer ".concat(n)}:{}}))});!function(e,t,s){Z(e).beforeAuthStateChanged(t,s)}(s,t,(()=>t(s.currentUser))),function(e,t,s,n){Z(e).onIdTokenChanged(t,s,n)}(s,(e=>t(e)))}}var r;const a=C("auth");return a&&bc(s,"http://".concat(a)),s}(Ex)),Sx.enabled&&"undefined"!==typeof window&&(Ix=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft();e=Z(e);const t=ut(e,tm);return t.isInitialized()?t.getImmediate():function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=ut(e,tm);if(s.isInitialized()){const e=s.getImmediate();if(G(t,s.getOptions()))return e;throw rm.create("already-initialized")}return s.initialize({options:t})}(e)}(Ex)),kx.enabled&&(Tx=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft(),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Mm;const s=ut(Z(e),Rm).getImmediate({identifier:t}),n=E("functions");return n&&function(e,t,s){!function(e,t,s){const n=T(t);e.emulatorOrigin="http".concat(n?"s":"","://").concat(t,":").concat(s),n&&(P(e.emulatorOrigin),M("Functions",!0))}(Z(e),t,s)}(s,...n),s}(Ex)),console.log("\u2705 Firebase initialized successfully")}catch(Jx){console.warn("\u26a0\ufe0f Firebase initialization failed, using offline mode:",Jx)}const Px=(0,r.createContext)(),Rx=e=>{let{children:t}=e;const[s,n]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1);(0,r.useEffect)((()=>{const e=async()=>{try{_x&&(i(!0),n(!0))}catch(Jx){console.warn("Firebase offline, using fallback mode"),i(!1),n(!1)}};e();const t=()=>{n(!0),e()},s=()=>{n(!1)};return window.addEventListener("online",t),window.addEventListener("offline",s),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}),[]);const o={app:Ex,db:_x,auth:Ax,analytics:Ix,functions:Tx,isOnline:s,firebaseReady:a};return(0,ox.jsx)(Px.Provider,{value:o,children:t})},Ox=(0,r.createContext)(),Mx=()=>{const e=(0,r.useContext)(Ox);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},Dx=e=>{let{children:t}=e;const[s,n]=(0,r.useState)(null),[a,i]=(0,r.useState)(localStorage.getItem("token"));(0,r.useEffect)((()=>{a&&(ix.defaults.headers.common.Authorization="Bearer ".concat(a),o())}),[a]);const o=async()=>{try{const e=await ix.get("".concat(Cx,"/auth/me"));n(e.data)}catch(Jx){console.error("Error fetching user profile:",Jx),l()}},l=()=>{i(null),n(null),localStorage.removeItem("token"),localStorage.removeItem("user"),delete ix.defaults.headers.common.Authorization};return(0,ox.jsx)(Ox.Provider,{value:{user:s,login:async(e,t)=>{try{const s=await ix.post("".concat(Cx,"/auth/login"),{email:e,password:t}),{access_token:r,user:a}=s.data;return i(r),n(a),localStorage.setItem("token",r),ix.defaults.headers.common.Authorization="Bearer ".concat(r),!0}catch(Jx){return console.error("Login error:",Jx),!1}},googleLogin:async e=>{try{const t=e.credential,s=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),r=decodeURIComponent(atob(s).split("").map((function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join("")),a=JSON.parse(r),o={id:a.sub,name:a.name,email:a.email,picture:a.picture,role:"admin"},l=btoa(JSON.stringify(o));return i(l),n(o),localStorage.setItem("token",l),localStorage.setItem("user",JSON.stringify(o)),!0}catch(Jx){return console.error("Google login error:",Jx),!1}},logout:l,isAuthenticated:!!a},children:t})},Lx=()=>{const[e,t]=(0,r.useState)(""),[s,n]=(0,r.useState)(""),[a,i]=(0,r.useState)(!1),{login:o,googleLogin:l}=Mx();return(0,ox.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100 flex items-center justify-center p-4",children:(0,ox.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl w-full max-w-md",children:[(0,ox.jsxs)("div",{className:"text-center mb-8",children:[(0,ox.jsx)("div",{className:"w-20 h-20 bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,ox.jsx)("span",{className:"text-white text-2xl font-bold",children:"IM"})}),(0,ox.jsx)("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"IL MANDORLA"}),(0,ox.jsx)("p",{className:"text-gray-600 mb-1",children:"Dashboard Administrativo"}),(0,ox.jsx)("p",{className:"text-sm text-orange-600 font-medium",children:"Powered by KumIA Technology"})]}),(0,ox.jsx)("div",{className:"mb-6",children:(0,ox.jsx)(b,{onSuccess:async e=>{i(!0);await l(e)||alert("Error de autenticaci\xf3n con Google"),i(!1)},onError:()=>{alert("Error al iniciar sesi\xf3n con Google")},theme:"outline",size:"large",text:"signin_with",shape:"rectangular",locale:"es",useOneTap:!1})}),(0,ox.jsxs)("div",{className:"relative mb-6",children:[(0,ox.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,ox.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,ox.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,ox.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"O contin\xfaa con"})})]}),(0,ox.jsxs)("form",{onSubmit:async t=>{t.preventDefault(),i(!0);await o(e,s)||alert("Error de autenticaci\xf3n"),i(!1)},className:"space-y-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),(0,ox.jsx)("input",{type:"email",required:!0,value:e,onChange:e=>t(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200",placeholder:"admin@ilmandorla.com"})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contrase\xf1a"}),(0,ox.jsx)("input",{type:"password",required:!0,value:s,onChange:e=>n(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500 transition-all duration-200",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"})]}),(0,ox.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-gradient-to-r from-orange-500 to-red-500 text-white py-3 px-4 rounded-lg hover:from-orange-600 hover:to-red-600 focus:outline-none focus:ring-2 focus:ring-orange-500 disabled:opacity-50 transition-all duration-200 transform hover:scale-105 shadow-lg",children:a?"Iniciando sesi\xf3n...":"Iniciar Sesi\xf3n"})]}),(0,ox.jsx)("div",{className:"text-center mt-6",children:(0,ox.jsx)("p",{className:"text-xs text-gray-500",children:"Powered by KumIA Technology - Versi\xf3n 2.0"})})]})})},zx=e=>{let{children:t,content:s,position:n="top"}=e;const[a,i]=(0,r.useState)(!1);return(0,ox.jsxs)("div",{className:"relative inline-block",children:[(0,ox.jsx)("div",{onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),className:"cursor-help",children:t}),a&&(0,ox.jsxs)("div",{className:"absolute z-10 px-3 py-2 text-sm text-white bg-gray-900 rounded-lg shadow-lg transition-opacity duration-200 ".concat("top"===n?"bottom-full mb-2":"top-full mt-2"," left-1/2 transform -translate-x-1/2 w-48"),children:[s,(0,ox.jsx)("div",{className:"absolute left-1/2 transform -translate-x-1/2 ".concat("top"===n?"top-full":"bottom-full"),children:(0,ox.jsx)("div",{className:"border-4 border-transparent ".concat("top"===n?"border-t-gray-900":"border-b-gray-900")})})]})]})},Fx=e=>{let{title:t,value:s,icon:n,color:r,trend:a,tooltip:i,category:o,onClick:l,loading:c=!1}=e;return(0,ox.jsxs)("div",{onClick:l,className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-lg transition-all duration-300 cursor-pointer transform hover:scale-105 ".concat(c?"animate-pulse":""),children:[(0,ox.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center mr-3 ".concat("revenue"===o?"bg-gradient-to-br from-green-500 to-emerald-600":"engagement"===o?"bg-gradient-to-br from-purple-500 to-pink-600":"brand"===o?"bg-gradient-to-br from-blue-500 to-indigo-600":"bg-gradient-to-br from-orange-500 to-red-500"),children:(0,ox.jsx)("span",{className:"text-white text-xl",children:n})}),(0,ox.jsxs)("div",{className:"flex-1",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("h3",{className:"text-sm font-medium text-gray-600 mr-2",children:t}),(0,ox.jsx)(zx,{content:i,children:(0,ox.jsx)("span",{className:"text-gray-400 text-xs",children:"\u2139\ufe0f"})})]}),(0,ox.jsx)("p",{className:"text-2xl font-bold ".concat(r," mt-1"),children:c?"...":s})]})]})}),a&&(0,ox.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ox.jsxs)("div",{className:"flex items-center text-sm ".concat(a.positive?"text-green-600":"text-red-600"),children:[(0,ox.jsx)("span",{className:"mr-1",children:a.positive?"\u2197\ufe0f":"\u2198\ufe0f"}),(0,ox.jsxs)("span",{className:"font-medium",children:[a.percentage,"%"]})]}),(0,ox.jsx)("div",{className:"text-xs text-gray-500",children:a.period})]})]})},Ux=e=>{let{data:t,title:s}=e;const[n,a]=(0,r.useState)(!1),i=["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"],o=Math.max(...t),l=Math.min(...t),c=t.reduce(((e,t)=>e+t),0),d=c/t.length,u=((t[t.length-1]-t[0])/t[0]*100).toFixed(1),m=t.indexOf(o);return(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mr-3",children:s}),(0,ox.jsx)("button",{onClick:()=>a(!n),className:"text-sm bg-blue-100 text-blue-700 px-3 py-1 rounded-full hover:bg-blue-200 transition-colors",children:n?"\ud83d\udd3c Ocultar":"\ud83d\udd3d Ver Detalles"})]}),(0,ox.jsxs)("div",{className:"text-right",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-green-600",children:["+",u,"%"]}),(0,ox.jsx)("div",{className:"text-sm text-gray-600",children:"Crecimiento"})]})]}),(0,ox.jsx)("div",{className:"mb-6",children:(0,ox.jsx)("div",{className:"relative",children:(0,ox.jsxs)("div",{className:"h-48 bg-gradient-to-t from-gray-50 to-white rounded-lg border border-gray-200 p-4 relative overflow-hidden",children:[(0,ox.jsx)("div",{className:"absolute inset-4",children:[0,25,50,75,100].map((e=>(0,ox.jsx)("div",{className:"absolute w-full border-t border-gray-200 opacity-50",style:{bottom:"".concat(e,"%")}},e)))}),(0,ox.jsxs)("svg",{className:"absolute inset-4 w-full h-full",viewBox:"0 0 100 100",preserveAspectRatio:"none",children:[(0,ox.jsx)("defs",{children:(0,ox.jsxs)("linearGradient",{id:"chartGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,ox.jsx)("stop",{offset:"0%",stopColor:"rgba(34, 197, 94, 0.2)"}),(0,ox.jsx)("stop",{offset:"100%",stopColor:"rgba(34, 197, 94, 0.05)"})]})}),(0,ox.jsx)("path",{d:"M 0 ".concat(100-(t[0]-l)/(o-l)*100," \n                   ").concat(t.map(((e,s)=>"L ".concat(s/(t.length-1)*100," ").concat(100-(e-l)/(o-l)*100))).join(" ")," \n                   L 100 100 L 0 100 Z"),fill:"url(#chartGradient)"}),(0,ox.jsx)("path",{d:"M 0 ".concat(100-(t[0]-l)/(o-l)*100," \n                   ").concat(t.map(((e,s)=>"L ".concat(s/(t.length-1)*100," ").concat(100-(e-l)/(o-l)*100))).join(" ")),fill:"none",stroke:"rgb(34, 197, 94)",strokeWidth:"3",className:"drop-shadow-sm"}),t.map(((e,s)=>(0,ox.jsx)("circle",{cx:s/(t.length-1)*100,cy:100-(e-l)/(o-l)*100,r:"4",fill:"rgb(34, 197, 94)",stroke:"white",strokeWidth:"2",className:"drop-shadow-sm hover:r-6 transition-all cursor-pointer"},s)))]}),(0,ox.jsx)("div",{className:"absolute inset-4 flex justify-between items-end pointer-events-none",children:t.map(((e,t)=>(0,ox.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ox.jsxs)("div",{className:"bg-gray-800 text-white text-xs px-2 py-1 rounded opacity-0 hover:opacity-100 transition-opacity mb-2",children:["$",e.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-xs text-gray-600 font-medium",children:i[t]})]},t)))})]})})}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,ox.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["$",c.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-xs text-gray-600",children:"Total Semana"})]}),(0,ox.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["$",Math.round(d).toLocaleString()]}),(0,ox.jsx)("div",{className:"text-xs text-gray-600",children:"Promedio Diario"})]}),(0,ox.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-lg font-bold text-gray-800",children:["$",o.toLocaleString()]}),(0,ox.jsxs)("div",{className:"text-xs text-gray-600",children:["Mejor D\xeda (",i[m],")"]})]}),(0,ox.jsxs)("div",{className:"bg-gray-50 p-3 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-lg font-bold text-green-600",children:["+",u,"%"]}),(0,ox.jsx)("div",{className:"text-xs text-gray-600",children:"Crecimiento"})]})]}),n&&(0,ox.jsx)("div",{className:"border-t border-gray-100 pt-4",children:(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"\ud83d\udcca An\xe1lisis Detallado"}),(0,ox.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"D\xeda con mejor rendimiento:"}),(0,ox.jsxs)("span",{className:"font-medium text-green-600",children:[i[m]," ($",o.toLocaleString(),")"]})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"D\xeda con menor rendimiento:"}),(0,ox.jsxs)("span",{className:"font-medium text-orange-600",children:[i[t.indexOf(l)]," ($",l.toLocaleString(),")"]})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Variaci\xf3n m\xe1xima:"}),(0,ox.jsxs)("span",{className:"font-medium text-blue-600",children:["$",(o-l).toLocaleString()]})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Tendencia general:"}),(0,ox.jsx)("span",{className:"font-medium ".concat(u>0?"text-green-600":"text-red-600"),children:u>0?"\ud83d\udcc8 Creciente":"\ud83d\udcc9 Decreciente"})]})]})]}),(0,ox.jsxs)("div",{className:"bg-blue-50 p-3 rounded-lg",children:[(0,ox.jsx)("h5",{className:"text-sm font-medium text-blue-800 mb-2",children:"\ud83d\udca1 Recomendaci\xf3n KUMIA"}),(0,ox.jsx)("p",{className:"text-xs text-blue-700",children:u>0?"Excelente tendencia de crecimiento del ".concat(u,"%. Considera mantener las estrategias actuales y expandir los d\xedas de mejor rendimiento."):"Oportunidad de mejora detectada. Revisa las estrategias para los d\xedas de menor rendimiento y considera promociones especiales."}),(0,ox.jsxs)("div",{className:"mt-2 text-xs text-blue-600",children:[(0,ox.jsx)("strong",{children:"Pr\xf3xima acci\xf3n sugerida:"})," Implementar promociones especiales los ",i[t.indexOf(l)].toLowerCase()," para equilibrar el rendimiento."]})]})]})})]})},Vx=e=>{let{roiMultiplier:t,weeklyImpact:s,monthlyRevenue:n}=e;return(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl p-6 border border-emerald-200",children:[(0,ox.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ox.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-green-600 rounded-xl flex items-center justify-center mr-4",children:(0,ox.jsx)("span",{className:"text-white text-xl",children:"\ud83e\udde0"})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-emerald-800",children:"Impacto generado por KUMIA esta semana"}),(0,ox.jsx)("p",{className:"text-sm text-emerald-700",children:"Resultados tangibles de tu inversi\xf3n"})]})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-3xl font-bold text-emerald-600",children:["+",t,"x"]}),(0,ox.jsx)("div",{className:"text-sm text-emerald-700",children:"ROI Mensual"})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-3xl font-bold text-emerald-600",children:["$",s.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-sm text-emerald-700",children:"Ingresos Extra"})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-3xl font-bold text-emerald-600",children:["$",n.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-sm text-emerald-700",children:"Facturaci\xf3n Mes"})]})]}),(0,ox.jsx)("div",{className:"bg-emerald-600 text-white rounded-lg p-4 text-center",children:(0,ox.jsxs)("p",{className:"text-lg font-bold",children:['"Este mes generaste un ROI de +',t,'x. KUMIA est\xe1 funcionando."']})})]})},Bx=e=>{let{recommendation:t,impact:s,action:n}=e;return(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-200",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-xl flex items-center justify-center mr-4",children:(0,ox.jsx)("span",{className:"text-white text-xl",children:"\ud83d\ude80"})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-indigo-800",children:"IA Sugiere: Expandir KUMIA"}),(0,ox.jsx)("p",{className:"text-sm text-indigo-700",children:"Oportunidad de crecimiento detectada"})]})]}),(0,ox.jsxs)("div",{className:"text-right",children:[(0,ox.jsx)("div",{className:"text-sm text-indigo-600",children:"Impacto Estimado"}),(0,ox.jsxs)("div",{className:"text-xl font-bold text-indigo-800",children:["+",s,"%"]})]})]}),(0,ox.jsx)("p",{className:"text-indigo-700 mb-4",children:t}),(0,ox.jsx)("button",{className:"w-full bg-gradient-to-r from-indigo-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-indigo-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105 shadow-lg",children:n})]})},qx=e=>{let{metrics:t}=e;const[s,n]=(0,r.useState)(!1),[a,i]=(0,r.useState)(!1),o=[85e3,92e3,78e3,95e3,88e3,96e3,102e3],l={multiplier:4.3,weeklyImpact:28500,monthlyRevenue:385e3},c=()=>{const e=o.reduce(((e,t)=>e+t),0),t=e/7,s=((o[6]-o[0])/o[0]*100).toFixed(1),n=o.indexOf(Math.max(...o)),r=o.indexOf(Math.min(...o)),a=["Lunes","Martes","Mi\xe9rcoles","Jueves","Viernes","S\xe1bado","Domingo"];return{totalRevenue:e,avgDailyRevenue:t,growth:s,bestDay:{name:a[n],revenue:o[n]},worstDay:{name:a[r],revenue:o[r]},weeklyData:o.map(((e,t)=>({day:a[t],revenue:e,growth:t>0?((e-o[t-1])/o[t-1]*100).toFixed(1):0})))}},d=e=>{const t=c(),s="reporte_semanal_".concat((new Date).toISOString().split("T")[0]);if("pdf"===e)alert("\ud83d\udcc4 Generando reporte PDF... (Esta funcionalidad requiere integraci\xf3n con jsPDF)");else if("excel"===e){const e="data:text/csv;charset=utf-8,D\xeda,Ingresos,Crecimiento\n"+t.weeklyData.map((e=>"".concat(e.day,",$").concat(e.revenue,",").concat(e.growth,"%"))).join("\n"),n=encodeURI(e),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download","".concat(s,".csv")),document.body.appendChild(r),r.click(),document.body.removeChild(r),alert("\ud83d\udcca Reporte Excel descargado exitosamente")}};return(0,ox.jsxs)("div",{id:"dashboard_summary",className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\udcc8 Dashboard General"}),(0,ox.jsx)("p",{className:"text-gray-600 mt-1",children:"Resumen ejecutivo de tu impacto KUMIA"})]}),(0,ox.jsx)("div",{className:"flex items-center justify-between",children:(0,ox.jsxs)("div",{className:"flex space-x-4",children:[(0,ox.jsx)("button",{onClick:()=>{n(!0)},className:"bg-gradient-to-r from-emerald-500 to-green-500 text-white px-6 py-3 rounded-lg hover:from-emerald-600 hover:to-green-600 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"\ud83d\udcca Reporte Semanal"}),(0,ox.jsx)("button",{onClick:()=>i(!0),className:"bg-white text-gray-700 border border-gray-300 px-6 py-3 rounded-lg hover:bg-gray-50 hover:text-gray-900 transition-all duration-200 shadow-sm",children:"\ud83d\ude80 Expandir KUMIA"})]})})]}),(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 flex items-center",children:["\ud83d\udcb0 Impacto Econ\xf3mico",(0,ox.jsx)("span",{className:"ml-2 text-sm bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Principal"})]}),(0,ox.jsx)("div",{className:"text-sm text-gray-500",children:"Impacto generado por KUMIA esta semana"})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ox.jsx)(Fx,{title:"Ingresos Atribuidos",value:"$".concat((t.total_revenue||0).toLocaleString()),icon:"\ud83d\udcb0",color:"text-green-600",category:"revenue",trend:{positive:!0,percentage:22.1,period:"vs mes anterior"},tooltip:"Ingresos directamente generados por las funciones KUMIA (IA, NFTs, automatizaciones)"}),(0,ox.jsx)(Fx,{title:"ROI Mensual",value:"+".concat(l.multiplier,"x"),icon:"\ud83d\udcc8",color:"text-emerald-600",category:"revenue",trend:{positive:!0,percentage:15.2,period:"vs mes anterior"},tooltip:"Retorno de inversi\xf3n: por cada $1 invertido en KUMIA, generas $4.3"}),(0,ox.jsx)(Fx,{title:"Conversiones IA",value:t.ai_conversions||0,icon:"\ud83e\udd16",color:"text-indigo-600",category:"revenue",trend:{positive:!0,percentage:28.9,period:"vs mes anterior"},tooltip:"N\xfamero de clientes convertidos a trav\xe9s de los agentes de IA"}),(0,ox.jsx)(Fx,{title:"Ticket Promedio",value:"$3,200",icon:"\ud83d\udcb3",color:"text-blue-600",category:"revenue",trend:{positive:!0,percentage:18.5,period:"vs mes anterior"},tooltip:"Valor promedio de consumo por cliente (incrementado 28% con KUMIA)"})]})]}),(0,ox.jsx)(Vx,{roiMultiplier:l.multiplier,weeklyImpact:l.weeklyImpact,monthlyRevenue:l.monthlyRevenue}),(0,ox.jsxs)("div",{children:[(0,ox.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:["\ud83d\udc9c Compromiso del Cliente",(0,ox.jsx)("span",{className:"ml-2 text-sm bg-purple-100 text-purple-800 px-2 py-1 rounded-full",children:"Fidelizaci\xf3n"})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ox.jsx)(Fx,{title:"Clientes Activos",value:t.total_customers||0,icon:"\ud83d\udc65",color:"text-purple-600",category:"engagement",trend:{positive:!0,percentage:15.2,period:"vs mes anterior"},tooltip:"Clientes \xfanicos que han interactuado con tu sistema KUMIA este mes"}),(0,ox.jsx)(Fx,{title:"NFTs Entregados",value:t.nfts_delivered||0,icon:"\ud83c\udf81",color:"text-pink-600",category:"engagement",trend:{positive:!0,percentage:12.3,period:"vs mes anterior"},tooltip:"Recompensas NFT entregadas que aumentan la fidelizaci\xf3n y retenci\xf3n"}),(0,ox.jsx)(Fx,{title:"Puntos Activos",value:t.total_points_delivered||0,icon:"\u2b50",color:"text-yellow-600",category:"engagement",trend:{positive:!0,percentage:18.5,period:"vs mes anterior"},tooltip:"Puntos de fidelizaci\xf3n acumulados por tus clientes"}),(0,ox.jsx)(Fx,{title:"Feedback Positivo",value:"".concat(t.total_feedback||0," (95%)"),icon:"\ud83d\udcac",color:"text-emerald-600",category:"engagement",trend:{positive:!0,percentage:8.7,period:"vs mes anterior"},tooltip:"Reviews y comentarios positivos recibidos a trav\xe9s del sistema"})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-3 flex items-center",children:["\ud83c\udf1f Impacto de Marca",(0,ox.jsx)("span",{className:"ml-2 text-sm bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:"Reputaci\xf3n"})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ox.jsx)(Fx,{title:"Rating Promedio",value:"".concat((t.avg_rating||0).toFixed(1),"/5"),icon:"\u2b50",color:"text-orange-600",category:"brand",trend:{positive:!0,percentage:4.2,period:"vs mes anterior"},tooltip:"Calificaci\xf3n promedio de tus clientes (mejorada con KUMIA)"}),(0,ox.jsx)(Fx,{title:"Alcance Digital",value:t.total_audience||0,icon:"\ud83d\udcf1",color:"text-blue-600",category:"brand",trend:{positive:!0,percentage:11.4,period:"vs mes anterior"},tooltip:"N\xfamero total de personas alcanzadas trav\xe9s de todos los canales digitales"}),(0,ox.jsx)(Fx,{title:"NPS Score",value:"8.7/10",icon:"\ud83d\udcca",color:"text-indigo-600",category:"brand",trend:{positive:!0,percentage:6.8,period:"vs mes anterior"},tooltip:"Net Promoter Score: probabilidad de que te recomienden"}),(0,ox.jsx)(Fx,{title:"Retenci\xf3n Cliente",value:"85%",icon:"\ud83d\udd04",color:"text-cyan-600",category:"brand",trend:{positive:!0,percentage:12.5,period:"vs mes anterior"},tooltip:"Porcentaje de clientes que regresan (incrementado con programa de fidelizaci\xf3n)"})]})]})]}),(0,ox.jsx)(Ux,{data:o,title:"\ud83d\udcc8 Crecimiento Semanal de Ingresos"}),(0,ox.jsx)(Bx,{recommendation:"Basado en tu ROI actual de +4.3x y crecimiento del 22%, es el momento perfecto para expandir KUMIA a un segundo local. Los datos muestran que tienes la base de clientes y el sistema optimizado para escalar.",impact:"150",action:"\ud83d\ude80 Expandir KUMIA a otro local"}),s&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-4xl max-h-screen overflow-y-auto",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\udcca Reporte Semanal"}),(0,ox.jsxs)("p",{className:"text-gray-600",children:["Semana del ",(new Date).toLocaleDateString()," - An\xe1lisis completo"]})]}),(0,ox.jsx)("button",{onClick:()=>n(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(()=>{const e=c();return(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 rounded-xl p-6 border border-emerald-200",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-emerald-800 mb-4",children:"\ud83d\udcb0 Resumen Ejecutivo"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:["$",e.totalRevenue.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-sm text-emerald-700",children:"Ingresos Totales"})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",Math.round(e.avgDailyRevenue).toLocaleString()]}),(0,ox.jsx)("div",{className:"text-sm text-blue-700",children:"Promedio Diario"})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[e.growth,"%"]}),(0,ox.jsx)("div",{className:"text-sm text-orange-700",children:"Crecimiento Semanal"})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg p-4 text-center",children:[(0,ox.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"+4.3x"}),(0,ox.jsx)("div",{className:"text-sm text-purple-700",children:"ROI Actual"})]})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 An\xe1lisis Diario Detallado"}),(0,ox.jsx)("div",{className:"overflow-x-auto",children:(0,ox.jsxs)("table",{className:"w-full text-left",children:[(0,ox.jsx)("thead",{children:(0,ox.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,ox.jsx)("th",{className:"py-3 px-4 font-medium text-gray-700",children:"D\xeda"}),(0,ox.jsx)("th",{className:"py-3 px-4 font-medium text-gray-700",children:"Ingresos"}),(0,ox.jsx)("th",{className:"py-3 px-4 font-medium text-gray-700",children:"Crecimiento"}),(0,ox.jsx)("th",{className:"py-3 px-4 font-medium text-gray-700",children:"Estado"})]})}),(0,ox.jsx)("tbody",{children:e.weeklyData.map(((t,s)=>(0,ox.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,ox.jsx)("td",{className:"py-3 px-4 font-medium",children:t.day}),(0,ox.jsxs)("td",{className:"py-3 px-4",children:["$",t.revenue.toLocaleString()]}),(0,ox.jsx)("td",{className:"py-3 px-4",children:(0,ox.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ".concat(parseFloat(t.growth)>0?"bg-green-100 text-green-800":parseFloat(t.growth)<0?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:[parseFloat(t.growth)>0?"\u2197\ufe0f":parseFloat(t.growth)<0?"\u2198\ufe0f":"\u2192"," ",t.growth,"%"]})}),(0,ox.jsx)("td",{className:"py-3 px-4",children:t.revenue===e.bestDay.revenue?(0,ox.jsx)("span",{className:"text-green-600 font-medium",children:"\ud83c\udfc6 Mejor d\xeda"}):t.revenue===e.worstDay.revenue?(0,ox.jsx)("span",{className:"text-red-600 font-medium",children:"\ud83d\udcc9 D\xeda bajo"}):(0,ox.jsx)("span",{className:"text-gray-600",children:"Normal"})})]},s)))})]})})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl border border-gray-200 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcca Gr\xe1fica de Rendimiento Semanal"}),(0,ox.jsx)("div",{className:"flex items-end justify-between h-48 bg-gray-50 rounded-lg p-4",children:e.weeklyData.map(((t,s)=>(0,ox.jsxs)("div",{className:"flex flex-col items-center group cursor-pointer",children:[(0,ox.jsxs)("div",{className:"text-xs text-gray-600 mb-2 opacity-0 group-hover:opacity-100 transition-opacity",children:["$",t.revenue.toLocaleString()]}),(0,ox.jsx)("div",{className:"bg-gradient-to-t from-orange-400 to-red-400 rounded-t-lg transition-all duration-500 w-12 group-hover:w-16 ".concat(t.revenue===e.bestDay.revenue?"from-green-400 to-emerald-500":t.revenue===e.worstDay.revenue?"from-red-400 to-red-500":""),style:{height:"".concat(t.revenue/Math.max(...o)*100,"%")}}),(0,ox.jsx)("span",{className:"text-sm text-gray-600 mt-2 group-hover:font-bold transition-all",children:t.day.substring(0,3)}),(0,ox.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:[t.growth,"%"]})]},s)))})]}),(0,ox.jsxs)("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-blue-800 mb-4",children:"\ud83e\udde0 Insights KUMIA"}),(0,ox.jsxs)("div",{className:"space-y-3",children:[(0,ox.jsxs)("div",{className:"flex items-start",children:[(0,ox.jsx)("span",{className:"text-blue-600 mr-2",children:"\u2022"}),(0,ox.jsxs)("p",{className:"text-blue-700",children:[(0,ox.jsx)("strong",{children:e.bestDay.name})," fue tu mejor d\xeda con $",e.bestDay.revenue.toLocaleString()," en ingresos."]})]}),(0,ox.jsxs)("div",{className:"flex items-start",children:[(0,ox.jsx)("span",{className:"text-blue-600 mr-2",children:"\u2022"}),(0,ox.jsxs)("p",{className:"text-blue-700",children:["El crecimiento semanal de ",(0,ox.jsxs)("strong",{children:[e.growth,"%"]})," est\xe1 por encima del promedio de la industria (12%)."]})]}),(0,ox.jsxs)("div",{className:"flex items-start",children:[(0,ox.jsx)("span",{className:"text-blue-600 mr-2",children:"\u2022"}),(0,ox.jsxs)("p",{className:"text-blue-700",children:["Considera promociones especiales para ",(0,ox.jsx)("strong",{children:e.worstDay.name})," para mejorar el rendimiento."]})]})]})]}),(0,ox.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[(0,ox.jsxs)("div",{className:"text-sm text-gray-500",children:["Reporte generado el ",(new Date).toLocaleString()]}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsx)("button",{onClick:()=>d("excel"),className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors",children:"\ud83d\udcca Exportar Excel"}),(0,ox.jsx)("button",{onClick:()=>d("pdf"),className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors",children:"\ud83d\udcc4 Exportar PDF"}),(0,ox.jsx)("button",{onClick:()=>n(!1),className:"bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"Cerrar"})]})]})]})})()]})})}),a&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-5xl max-h-screen overflow-y-auto",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83d\ude80 Expandir KUMIA a Nuevos Locales"}),(0,ox.jsx)("p",{className:"text-gray-600",children:"An\xe1lisis de viabilidad y proceso de expansi\xf3n basado en tu \xe9xito actual"})]}),(0,ox.jsx)("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-emerald-50 to-green-50 p-6 rounded-lg border border-emerald-200",children:[(0,ox.jsx)("h3",{className:"font-bold text-emerald-800 mb-4",children:"\ud83d\udcca An\xe1lisis de Viabilidad Actual"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ox.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:["+",l.multiplier,"x"]}),(0,ox.jsx)("div",{className:"text-sm text-emerald-700",children:"ROI Mensual"}),(0,ox.jsx)("div",{className:"text-xs text-emerald-600 mt-1",children:"\u2705 \xd3ptimo para expansi\xf3n"})]}),(0,ox.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,ox.jsxs)("div",{className:"text-2xl font-bold text-blue-600",children:["$",l.monthlyRevenue.toLocaleString()]}),(0,ox.jsx)("div",{className:"text-sm text-blue-700",children:"Facturaci\xf3n Mensual"}),(0,ox.jsx)("div",{className:"text-xs text-blue-600 mt-1",children:"\u2705 Base s\xf3lida"})]}),(0,ox.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,ox.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:"85%"}),(0,ox.jsx)("div",{className:"text-sm text-purple-700",children:"Retenci\xf3n Clientes"}),(0,ox.jsx)("div",{className:"text-xs text-purple-600 mt-1",children:"\u2705 Muy alta fidelizaci\xf3n"})]}),(0,ox.jsxs)("div",{className:"bg-white p-4 rounded-lg text-center",children:[(0,ox.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:"22%"}),(0,ox.jsx)("div",{className:"text-sm text-orange-700",children:"Crecimiento Mensual"}),(0,ox.jsx)("div",{className:"text-xs text-orange-600 mt-1",children:"\u2705 Tendencia ascendente"})]})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,ox.jsx)("h3",{className:"font-bold text-gray-800 mb-4",children:"\ud83d\uddfa\ufe0f Proceso de Expansi\xf3n KUMIA"}),(0,ox.jsxs)("div",{className:"space-y-4",children:[(0,ox.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-blue-50 rounded-lg",children:[(0,ox.jsx)("div",{className:"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"1"}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-blue-800",children:"An\xe1lisis de Mercado"}),(0,ox.jsx)("p",{className:"text-sm text-blue-700",children:"Identificamos las mejores ubicaciones basadas en demograf\xeda, competencia y potencial de mercado."}),(0,ox.jsx)("div",{className:"mt-2 text-xs text-blue-600",children:"\u23f1\ufe0f Duraci\xf3n: 2-3 semanas"})]})]}),(0,ox.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-purple-50 rounded-lg",children:[(0,ox.jsx)("div",{className:"w-8 h-8 bg-purple-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"2"}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-purple-800",children:"Replicaci\xf3n del Sistema"}),(0,ox.jsx)("p",{className:"text-sm text-purple-700",children:"Implementamos tu configuraci\xf3n KUMIA existente: men\xfa, agentes IA, sistema de recompensas y toda tu base de conocimiento."}),(0,ox.jsx)("div",{className:"mt-2 text-xs text-purple-600",children:"\u23f1\ufe0f Duraci\xf3n: 1-2 semanas"})]})]}),(0,ox.jsxs)("div",{className:"flex items-start space-x-4 p-4 bg-green-50 rounded-lg",children:[(0,ox.jsx)("div",{className:"w-8 h-8 bg-green-500 text-white rounded-full flex items-center justify-center text-sm font-bold",children:"3"}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-green-800",children:"Lanzamiento Coordinado"}),(0,ox.jsx)("p",{className:"text-sm text-green-700",children:"Campa\xf1a de marketing multiplataforma, capacitaci\xf3n del equipo y transferencia de clientes entre locales."}),(0,ox.jsx)("div",{className:"mt-2 text-xs text-green-600",children:"\u23f1\ufe0f Duraci\xf3n: 1 semana"})]})]})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,ox.jsx)("h3",{className:"font-bold text-gray-800 mb-4",children:"\ud83d\udccd Ubicaciones Potenciales Analizadas"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ox.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800",children:"Las Condes"}),(0,ox.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs font-medium",children:"Recomendado"})]}),(0,ox.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Potencial de mercado:"}),(0,ox.jsx)("span",{className:"font-medium text-green-600",children:"Alto"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Demograf\xeda objetivo:"}),(0,ox.jsx)("span",{className:"font-medium text-gray-800",children:"95% match"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Competencia:"}),(0,ox.jsx)("span",{className:"font-medium text-orange-600",children:"Media"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"ROI estimado:"}),(0,ox.jsx)("span",{className:"font-medium text-blue-600",children:"+3.8x"})]})]})]}),(0,ox.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800",children:"Providencia"}),(0,ox.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 rounded-full text-xs font-medium",children:"Viable"})]}),(0,ox.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Potencial de mercado:"}),(0,ox.jsx)("span",{className:"font-medium text-blue-600",children:"Medio-Alto"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Demograf\xeda objetivo:"}),(0,ox.jsx)("span",{className:"font-medium text-gray-800",children:"88% match"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Competencia:"}),(0,ox.jsx)("span",{className:"font-medium text-red-600",children:"Alta"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"ROI estimado:"}),(0,ox.jsx)("span",{className:"font-medium text-blue-600",children:"+3.2x"})]})]})]}),(0,ox.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800",children:"\xd1u\xf1oa"}),(0,ox.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-medium",children:"En an\xe1lisis"})]}),(0,ox.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Potencial de mercado:"}),(0,ox.jsx)("span",{className:"font-medium text-blue-600",children:"Medio"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Demograf\xeda objetivo:"}),(0,ox.jsx)("span",{className:"font-medium text-gray-800",children:"75% match"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Competencia:"}),(0,ox.jsx)("span",{className:"font-medium text-green-600",children:"Baja"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"ROI estimado:"}),(0,ox.jsx)("span",{className:"font-medium text-blue-600",children:"+2.9x"})]})]})]})]})]}),(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-lg border border-orange-200",children:[(0,ox.jsx)("h3",{className:"font-bold text-orange-800 mb-4",children:"\ud83c\udfaf Beneficios de Expandir con KUMIA"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-orange-700 mb-3",children:"\ud83d\udcb0 Impacto Econ\xf3mico"}),(0,ox.jsxs)("ul",{className:"space-y-2 text-sm text-orange-600",children:[(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"})," Duplicar ingresos proyectados en 6 meses"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"})," Econom\xedas de escala en marketing y operaciones"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"})," Diversificaci\xf3n de riesgo geogr\xe1fico"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-green-500 mr-2",children:"\u2022"})," Mayor poder de negociaci\xf3n con proveedores"]})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-orange-700 mb-3",children:"\ud83d\ude80 Ventajas Operacionales"}),(0,ox.jsxs)("ul",{className:"space-y-2 text-sm text-orange-600",children:[(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"})," Sistema KUMIA ya optimizado y probado"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"})," Base de clientes transferible entre locales"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"})," Agentes IA entrenados con tu conocimiento"]}),(0,ox.jsxs)("li",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-blue-500 mr-2",children:"\u2022"})," M\xe9tricas centralizadas para ambos locales"]})]})]})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,ox.jsx)("h3",{className:"font-bold text-gray-800 mb-4",children:"\ud83d\udcbc Plan de Inversi\xf3n y Cronograma"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ox.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"\ud83d\udcb0 Inversi\xf3n Estimada"}),(0,ox.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Setup KUMIA (nuevo local):"}),(0,ox.jsx)("span",{className:"font-medium",children:"$2,500"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"An\xe1lisis de mercado:"}),(0,ox.jsx)("span",{className:"font-medium",children:"$1,200"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Capacitaci\xf3n y setup:"}),(0,ox.jsx)("span",{className:"font-medium",children:"$800"})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Marketing de lanzamiento:"}),(0,ox.jsx)("span",{className:"font-medium",children:"$1,500"})]}),(0,ox.jsx)("div",{className:"border-t border-gray-300 pt-2 mt-3",children:(0,ox.jsxs)("div",{className:"flex justify-between font-bold",children:[(0,ox.jsx)("span",{children:"Total estimado:"}),(0,ox.jsx)("span",{className:"text-green-600",children:"$6,000"})]})})]})]}),(0,ox.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800 mb-3",children:"\ud83d\udcc5 Cronograma de Expansi\xf3n"}),(0,ox.jsxs)("div",{className:"space-y-3",children:[(0,ox.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ox.jsx)("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),(0,ox.jsxs)("div",{className:"text-sm",children:[(0,ox.jsx)("div",{className:"font-medium",children:"Semanas 1-3: An\xe1lisis"}),(0,ox.jsx)("div",{className:"text-gray-600",children:"Estudio de mercado y selecci\xf3n de ubicaci\xf3n"})]})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ox.jsx)("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),(0,ox.jsxs)("div",{className:"text-sm",children:[(0,ox.jsx)("div",{className:"font-medium",children:"Semanas 4-5: Setup"}),(0,ox.jsx)("div",{className:"text-gray-600",children:"Implementaci\xf3n t\xe9cnica y replicaci\xf3n"})]})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ox.jsx)("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),(0,ox.jsxs)("div",{className:"text-sm",children:[(0,ox.jsx)("div",{className:"font-medium",children:"Semana 6: Lanzamiento"}),(0,ox.jsx)("div",{className:"text-gray-600",children:"Apertura y campa\xf1a de marketing"})]})]})]})]})]})]}),(0,ox.jsxs)("div",{className:"flex space-x-4",children:[(0,ox.jsx)("button",{onClick:()=>i(!1),className:"flex-1 bg-gray-100 text-gray-700 px-6 py-3 rounded-lg hover:bg-gray-200 transition-colors",children:"Cerrar"}),(0,ox.jsx)("button",{onClick:()=>{alert("\ud83d\udce7 Solicitud de expansi\xf3n enviada!\n\nNuestro equipo de crecimiento se contactar\xe1 contigo en las pr\xf3ximas 24 horas para iniciar el an\xe1lisis detallado.\n\n\ud83d\udcca Incluiremos:\n\u2022 An\xe1lisis de mercado personalizado\n\u2022 Proyecciones financieras espec\xedficas\n\u2022 Plan de implementaci\xf3n paso a paso\n\u2022 Cronograma detallado de expansi\xf3n"),i(!1)},className:"flex-1 bg-blue-500 text-white px-6 py-3 rounded-lg hover:bg-blue-600 transition-colors",children:"\ud83d\udcca Solicitar An\xe1lisis Detallado"}),(0,ox.jsx)("button",{onClick:()=>{alert("\ud83d\ude80 \xa1Excelente decisi\xf3n!\n\nIniciaremos el proceso de expansi\xf3n inmediatamente:\n\n\u2705 An\xe1lisis de mercado: Las Condes (recomendado)\n\u2705 Setup t\xe9cnico: 2 semanas\n\u2705 Lanzamiento estimado: 6 semanas\n\u2705 ROI proyectado: +3.8x\n\nNuestro equipo se contactar\xe1 en las pr\xf3ximas 2 horas para coordinar los detalles."),i(!1)},className:"flex-1 bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-bold",children:"\ud83d\ude80 Iniciar Expansi\xf3n Ahora"})]})]})]})})})]})},Hx=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)(["Entradas","Sandwiches","Parrillas","Pizzas","Bebidas"]),[a,i]=(0,r.useState)("all"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)("admin"),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),[b,v]=(0,r.useState)("add"),[y,j]=(0,r.useState)(""),[N,w]=(0,r.useState)(-1),[k,S]=(0,r.useState)({name:"",description:"",price:"",category:"Entradas",image:"",video:"",is_active:!0,high_margin:!1,popularity:3,upselling_suggestions:"",sales_count:0});(0,r.useEffect)((()=>{E(),C()}),[]);const C=()=>{t([{id:"entrada_1",name:"Nachos",description:"Nachos con salsa y guacamole",price:4500,category:"Entradas",image:"",is_active:!0,high_margin:!1,popularity:4,sales_count:23},{id:"entrada_2",name:"Papas Fritas",description:"Papas r\xfasticas al horno",price:3200,category:"Entradas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:45},{id:"entrada_3",name:"Papas con Cheddar y Bacon",description:"Papas con queso cheddar y bacon ahumado",price:4800,category:"Entradas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:38},{id:"entrada_4",name:"Empanadas",description:"Empanadas de carne ahumada (x3)",price:3600,category:"Entradas",image:"",is_active:!0,high_margin:!1,popularity:4,sales_count:28},{id:"entrada_5",name:"Alitas BBQ",description:"Alitas de pollo con salsa BBQ Il Mandorla",price:5500,category:"Entradas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:42},{id:"entrada_6",name:"Nachos con Pulled Pork",description:"Nachos cubiertos con pulled pork ahumado",price:6200,category:"Entradas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:32},{id:"entrada_7",name:"Chip\xe1 Relleno",description:"Chip\xe1 relleno con queso y hierbas",price:2800,category:"Entradas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:15},{id:"sandwich_1",name:"Brooklyn",description:"Brisket, cebolla caramelizada, queso cheddar, pan artesanal",price:8900,category:"Sandwiches",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:67},{id:"sandwich_2",name:"Pampeana",description:"Carne ahumada, chimichurri, tomate, lechuga",price:7800,category:"Sandwiches",image:"",is_active:!0,high_margin:!1,popularity:4,sales_count:54},{id:"sandwich_3",name:"Chorip\xe1n",description:"Chorizo ahumado, chimichurri, pan crujiente",price:5200,category:"Sandwiches",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:89},{id:"sandwich_4",name:"Pulled Pork",description:"Pulled pork ahumado, coleslaw, salsa BBQ",price:7200,category:"Sandwiches",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:43},{id:"parrilla_1",name:"Plato de Carne Individual",description:"Brisket o costillas con guarnici\xf3n",price:12500,category:"Parrillas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:78},{id:"parrilla_2",name:"Para Compartir x2",description:"Variedad de carnes ahumadas para 2 personas",price:18900,category:"Parrillas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:45},{id:"parrilla_3",name:"Para Compartir x4",description:"Parrillada completa para 4 personas",price:32500,category:"Parrillas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:23},{id:"parrilla_4",name:"Baby Ribs",description:"Costillas de cerdo baby con glaseado especial",price:14200,category:"Parrillas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:56},{id:"parrilla_5",name:"Tex-Mex",description:"Carne ahumada estilo texano con especias",price:13800,category:"Parrillas",image:"",is_active:!0,high_margin:!1,popularity:4,sales_count:34},{id:"pizza_1",name:"Muzzarella",description:"Pizza cl\xe1sica con muzzarella y or\xe9gano",price:6800,category:"Pizzas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:67},{id:"pizza_2",name:"4 Quesos",description:"Muzzarella, roquefort, parmesano y provoleta",price:8200,category:"Pizzas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:43},{id:"pizza_3",name:"Bechamel",description:"Salsa bechamel, jam\xf3n y muzzarella",price:7500,category:"Pizzas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:32},{id:"pizza_4",name:"Asado y Hongos",description:"Carne asada, hongos y cebolla",price:9200,category:"Pizzas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:38},{id:"pizza_5",name:"Margarita con Jam\xf3n",description:"Tomate, albahaca, jam\xf3n y muzzarella",price:7800,category:"Pizzas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:28},{id:"pizza_6",name:"Pulled Pork Pizza",description:"Pulled pork ahumado con cebolla morada",price:10500,category:"Pizzas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:34},{id:"pizza_7",name:"Spicy Bacon",description:"Bacon ahumado, jalape\xf1os y queso picante",price:9800,category:"Pizzas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:29},{id:"bebida_1",name:"Tragos de Autor",description:"C\xf3cteles signature de la casa",price:4500,category:"Bebidas",image:"",is_active:!0,high_margin:!0,popularity:4,sales_count:78},{id:"bebida_2",name:"Tragos Cl\xe1sicos",description:"Whisky sour, mojito, caipirinha",price:3800,category:"Bebidas",image:"",is_active:!0,high_margin:!1,popularity:4,sales_count:89},{id:"bebida_3",name:"Vinos",description:"Selecci\xf3n de vinos tintos y blancos",price:5200,category:"Bebidas",image:"",is_active:!0,high_margin:!0,popularity:3,sales_count:45},{id:"bebida_4",name:"Jugos Naturales",description:"Jugos de frutas frescas",price:2800,category:"Bebidas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:67},{id:"bebida_5",name:"Cerveza Artesanal",description:"IPA, Stout y Lager de la casa",price:3200,category:"Bebidas",image:"",is_active:!0,high_margin:!0,popularity:5,sales_count:123},{id:"bebida_6",name:"Gaseosas",description:"Coca Cola, Sprite, Fanta",price:1800,category:"Bebidas",image:"",is_active:!0,high_margin:!1,popularity:3,sales_count:98},{id:"bebida_7",name:"Agua",description:"Agua mineral con o sin gas",price:1200,category:"Bebidas",image:"",is_active:!0,high_margin:!1,popularity:2,sales_count:156}])},E=async()=>{try{const e=await ix.get("".concat(Cx,"/menu"));e.data&&e.data.length>0&&t(e.data)}catch(Jx){console.error("Error fetching menu items:",Jx)}},_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=e.target.files[0];if(s){const e=new FileReader;e.onload=e=>{const s=e.target.result;t&&o?l((e=>d(d({},e),{},{image:s}))):S((e=>d(d({},e),{},{image:s})))},e.readAsDataURL(s)}},A=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=e.target.files[0];if(s&&s.size<=52428800){const e=new FileReader;e.onload=e=>{const s=e.target.result;t&&o?l((e=>d(d({},e),{},{video:s}))):S((e=>d(d({},e),{},{video:s})))},e.readAsDataURL(s)}else alert("El archivo de video es muy grande. M\xe1ximo 50MB.")},I=e=>{var s;let{item:n}=e;return(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-all duration-200",children:[(0,ox.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-red-400 rounded-xl flex items-center justify-center mr-4 overflow-hidden",children:n.image?(0,ox.jsx)("img",{src:n.image,alt:n.name,className:"w-full h-full object-cover rounded-xl"}):(0,ox.jsx)("span",{className:"text-white text-2xl",children:"\ud83c\udf7d\ufe0f"})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h3",{className:"font-semibold text-gray-800",children:n.name}),(0,ox.jsx)("p",{className:"text-sm text-gray-600",children:n.category}),(0,ox.jsxs)("p",{className:"text-lg font-bold text-green-600",children:["$",null===(s=n.price)||void 0===s?void 0:s.toLocaleString()]})]})]}),(0,ox.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,ox.jsx)("button",{onClick:()=>l(n),className:"bg-blue-500 text-white w-8 h-8 rounded-full flex items-center justify-center hover:bg-blue-600 transition-colors",title:"Editar item",children:"\u270f\ufe0f"}),(0,ox.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(n.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:n.is_active?"Activo":"Inactivo"}),n.high_margin&&(0,ox.jsx)("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"\ud83d\udcb0 Alto Margen"}),(0,ox.jsxs)("div",{className:"text-xs text-gray-500",children:["Vendido: ",n.sales_count||0," veces"]})]})]}),(0,ox.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:n.description}),n.video&&(0,ox.jsx)("div",{className:"mb-4",children:(0,ox.jsx)("video",{controls:!0,className:"w-full h-32 object-cover rounded-lg",children:(0,ox.jsx)("source",{src:n.video,type:"video/mp4"})})}),(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ox.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ox.jsx)("span",{className:"text-sm text-gray-600",children:"Popularidad:"}),(0,ox.jsx)("div",{className:"flex",children:[...Array(5)].map(((e,t)=>(0,ox.jsx)("span",{className:"text-sm ".concat(t<(n.popularity||0)?"text-yellow-400":"text-gray-300"),children:"\u2b50"},t)))})]}),(0,ox.jsx)("div",{className:"text-sm text-gray-600",children:n.upselling_suggestions&&(0,ox.jsxs)("span",{children:["Sugerido con: ",n.upselling_suggestions]})})]}),(0,ox.jsxs)("div",{className:"flex space-x-2",children:[(0,ox.jsx)("button",{onClick:()=>T(n),className:"flex-1 bg-purple-100 text-purple-700 px-3 py-2 rounded-lg text-sm hover:bg-purple-200 transition-colors",children:"\ud83d\udccb Duplicar"}),(0,ox.jsx)("button",{onClick:()=>P(n.id),className:"flex-1 px-3 py-2 rounded-lg text-sm transition-colors ".concat(n.is_active?"bg-red-100 text-red-700 hover:bg-red-200":"bg-green-100 text-green-700 hover:bg-green-200"),children:n.is_active?"\ud83d\udd34 Desactivar":"\ud83d\udfe2 Activar"}),(0,ox.jsx)("button",{onClick:()=>(async e=>{if(confirm("\xbfEst\xe1s seguro de que quieres eliminar este item?"))try{await ix.delete("".concat(Cx,"/menu/").concat(e)),t((t=>t.filter((t=>t.id!==e)))),alert("\xa1Item eliminado exitosamente!")}catch(Jx){console.error("Error deleting item:",Jx),alert("Error al eliminar el item. Intenta de nuevo.")}})(n.id),className:"bg-red-100 text-red-700 px-3 py-2 rounded-lg text-sm hover:bg-red-200 transition-colors",children:"\ud83d\uddd1\ufe0f Eliminar"})]})]})},T=e=>{const s=d(d({},e),{},{id:"".concat(e.category.toLowerCase(),"_").concat(Date.now()),name:"".concat(e.name," (Copia)"),is_active:!1,sales_count:0});t((e=>[...e,s])),alert("Item duplicado exitosamente")},P=async s=>{try{const n=e.find((e=>e.id===s)),r=d(d({},n),{},{is_active:!n.is_active});await ix.put("".concat(Cx,"/menu/").concat(s),r),t((e=>e.map((e=>e.id===s?d(d({},e),{},{is_active:!e.is_active}):e))))}catch(Jx){console.error("Error toggling item status:",Jx),t((e=>e.map((e=>e.id===s?d(d({},e),{},{is_active:!e.is_active}):e))))}},R=()=>{x(!0)},O="all"===a?e:e.filter((e=>e.category===a));return(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"\ud83c\udf7d\ufe0f Men\xfa"}),(0,ox.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestiona tu carta digital"})]}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsxs)("button",{onClick:()=>{u("admin"===c?"customer":"admin")},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:["\ud83d\udc41\ufe0f Vista ","admin"===c?"Cliente":"Admin"]}),(0,ox.jsx)("button",{onClick:()=>{h(!m)},className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition-colors",children:"\ud83d\udcca Anal\xedticas"}),(0,ox.jsx)("button",{onClick:R,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-4 py-2 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200",children:"+ Nuevo Item"})]})]}),m&&(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcca Anal\xedticas del Men\xfa"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ox.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,ox.jsx)("h4",{className:"font-medium text-green-800",children:"Productos M\xe1s Vendidos"}),(0,ox.jsx)("div",{className:"mt-2 space-y-1",children:e.slice(0,3).map((e=>(0,ox.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ox.jsx)("span",{children:e.name}),(0,ox.jsx)("span",{className:"text-green-600",children:e.sales_count||0})]},e.id)))})]}),(0,ox.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,ox.jsx)("h4",{className:"font-medium text-yellow-800",children:"Alto Margen"}),(0,ox.jsx)("div",{className:"mt-2 space-y-1",children:e.filter((e=>e.high_margin)).map((e=>(0,ox.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ox.jsx)("span",{children:e.name}),(0,ox.jsxs)("span",{className:"text-yellow-600",children:["$",e.price]})]},e.id)))})]}),(0,ox.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,ox.jsx)("h4",{className:"font-medium text-blue-800",children:"Sugerencias IA"}),(0,ox.jsxs)("div",{className:"mt-2 text-sm text-blue-700",children:["\u2022 Promocionar platos de alto margen",(0,ox.jsx)("br",{}),"\u2022 Combinar entrantes con principales",(0,ox.jsx)("br",{}),"\u2022 Destacar productos populares"]})]})]})]}),(0,ox.jsxs)("div",{className:"flex flex-wrap gap-2 items-center",children:[(0,ox.jsx)("button",{onClick:()=>i("all"),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat("all"===a?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"Todos"}),s.map(((t,r)=>(0,ox.jsxs)("div",{className:"relative group",children:[(0,ox.jsx)("button",{onClick:()=>i(t),className:"px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ".concat(a===t?"bg-orange-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:t}),(0,ox.jsxs)("div",{className:"absolute top-full left-0 mt-1 bg-white border border-gray-200 rounded-lg shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-10 min-w-max",children:[(0,ox.jsx)("button",{onClick:()=>((e,t)=>{v("edit"),j(e),w(t),f(!0)})(t,r),className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 rounded-t-lg",children:"\u270f\ufe0f Editar"}),(0,ox.jsx)("button",{onClick:()=>{return e=t,v("duplicate"),j("".concat(e," (Copia)")),void f(!0);var e},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"\ud83d\udccb Duplicar"}),(0,ox.jsx)("button",{onClick:()=>((t,r)=>{if(e.some((e=>e.category===t))&&!confirm('La categor\xeda "'.concat(t,'" tiene items asociados. \xbfEst\xe1s seguro de eliminarla? Los items quedar\xe1n sin categor\xeda.')))return;const o=s.filter(((e,t)=>t!==r));n(o),a===t&&i("all"),alert("\u2705 Categor\xeda eliminada exitosamente")})(t,r),className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 rounded-b-lg",children:"\ud83d\uddd1\ufe0f Eliminar"})]})]},t))),(0,ox.jsx)("button",{onClick:()=>{v("add"),j(""),f(!0)},className:"px-4 py-2 rounded-lg text-sm font-medium bg-gradient-to-r from-green-500 to-emerald-500 text-white hover:from-green-600 hover:to-emerald-600 transition-all duration-200 transform hover:scale-105 shadow-lg",children:"\u2795 Nueva Categor\xeda"})]}),(0,ox.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.length>0?O.map((e=>(0,ox.jsx)(I,{item:e},e.id))):(0,ox.jsxs)("div",{className:"col-span-full text-center py-12",children:[(0,ox.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf7d\ufe0f"}),(0,ox.jsx)("h3",{className:"text-xl font-bold text-gray-700 mb-2",children:"No hay items en esta categor\xeda"}),(0,ox.jsx)("p",{className:"text-gray-500 mb-4",children:"Agrega el primer item para esta categor\xeda"}),(0,ox.jsx)("button",{onClick:R,className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200",children:"+ Agregar Primer Item"})]})}),p&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-screen overflow-y-auto",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udf7d\ufe0f Nuevo Item del Men\xfa"}),(0,ox.jsx)("p",{className:"text-gray-600",children:"Agrega un nuevo plato a la carta"})]}),(0,ox.jsx)("button",{onClick:()=>x(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del plato *"}),(0,ox.jsx)("input",{type:"text",value:k.name,onChange:e=>S((t=>d(d({},t),{},{name:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ej: Brisket ahumado"})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),(0,ox.jsx)("input",{type:"number",value:k.price,onChange:e=>S((t=>d(d({},t),{},{price:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"15000"})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda *"}),(0,ox.jsx)("select",{value:k.category,onChange:e=>S((t=>d(d({},t),{},{category:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:s.map((e=>(0,ox.jsx)("option",{value:e,children:e},e)))})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,ox.jsx)("textarea",{value:k.description,onChange:e=>S((t=>d(d({},t),{},{description:e.target.value}))),rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Describe los ingredientes y preparaci\xf3n..."})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen del plato"}),(0,ox.jsx)("input",{type:"file",accept:"image/*",onChange:e=>_(e,!1),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),k.image&&(0,ox.jsx)("div",{className:"mt-2",children:(0,ox.jsx)("img",{src:k.image,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video del plato (opcional)"}),(0,ox.jsx)("input",{type:"file",accept:"video/*",onChange:e=>A(e,!1),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),k.video&&(0,ox.jsx)("div",{className:"mt-2",children:(0,ox.jsx)("video",{controls:!0,className:"w-full h-32 object-cover rounded-lg",children:(0,ox.jsx)("source",{src:k.video,type:"video/mp4"})})})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Popularidad (1-5)"}),(0,ox.jsx)("input",{type:"number",min:"1",max:"5",value:k.popularity,onChange:e=>S((t=>d(d({},t),{},{popularity:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-4 pt-6",children:[(0,ox.jsxs)("label",{className:"flex items-center",children:[(0,ox.jsx)("input",{type:"checkbox",checked:k.high_margin,onChange:e=>S((t=>d(d({},t),{},{high_margin:e.target.checked}))),className:"mr-2"}),"\ud83d\udcb0 Alto margen"]}),(0,ox.jsxs)("label",{className:"flex items-center",children:[(0,ox.jsx)("input",{type:"checkbox",checked:k.is_active,onChange:e=>S((t=>d(d({},t),{},{is_active:e.target.checked}))),className:"mr-2"}),"\u2705 Activo"]})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sugerencias de upselling"}),(0,ox.jsx)("input",{type:"text",value:k.upselling_suggestions,onChange:e=>S((t=>d(d({},t),{},{upselling_suggestions:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ej: Papas fritas, Bebida, Postre"})]})]}),(0,ox.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 mt-8",children:[(0,ox.jsx)("div",{className:"text-sm text-gray-500",children:"* Campos obligatorios"}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsx)("button",{onClick:()=>x(!1),className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,ox.jsx)("button",{onClick:async()=>{if(k.name&&k.price)try{const e=d(d({},k),{},{id:"".concat(k.category.toLowerCase(),"_").concat(Date.now()),price:parseFloat(k.price),sales_count:0,popularity:parseInt(k.popularity)||3});await ix.post("".concat(Cx,"/menu"),e);t((t=>[...t,e])),x(!1),S({name:"",description:"",price:"",category:"Entradas",image:"",video:"",is_active:!0,high_margin:!1,popularity:3,upselling_suggestions:"",sales_count:0}),alert("\xa1Item creado exitosamente!")}catch(Jx){console.error("Error creating item:",Jx),alert("Error al crear el item. Intenta de nuevo.")}else alert("Por favor completa el nombre y el precio")},className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-3 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-bold",children:"\ud83c\udf7d\ufe0f Crear Item"})]})]})]})})}),o&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-2xl max-h-screen overflow-y-auto",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\u270f\ufe0f Editar Item"}),(0,ox.jsx)("p",{className:"text-gray-600",children:"Modifica los detalles del plato"})]}),(0,ox.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(0,ox.jsxs)("div",{className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre del plato *"}),(0,ox.jsx)("input",{type:"text",value:o.name,onChange:e=>l((t=>d(d({},t),{},{name:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Precio *"}),(0,ox.jsx)("input",{type:"number",value:o.price,onChange:e=>l((t=>d(d({},t),{},{price:parseFloat(e.target.value)}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categor\xeda *"}),(0,ox.jsx)("select",{value:o.category,onChange:e=>l((t=>d(d({},t),{},{category:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",children:s.map((e=>(0,ox.jsx)("option",{value:e,children:e},e)))})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Descripci\xf3n"}),(0,ox.jsx)("textarea",{value:o.description,onChange:e=>l((t=>d(d({},t),{},{description:e.target.value}))),rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Imagen del plato"}),(0,ox.jsx)("input",{type:"file",accept:"image/*",onChange:e=>_(e,!0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),o.image&&(0,ox.jsx)("div",{className:"mt-2",children:(0,ox.jsx)("img",{src:o.image,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"})})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video del plato (opcional)"}),(0,ox.jsx)("input",{type:"file",accept:"video/*",onChange:e=>A(e,!0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"}),o.video&&(0,ox.jsx)("div",{className:"mt-2",children:(0,ox.jsx)("video",{controls:!0,className:"w-full h-32 object-cover rounded-lg",children:(0,ox.jsx)("source",{src:o.video,type:"video/mp4"})})})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Popularidad (1-5)"}),(0,ox.jsx)("input",{type:"number",min:"1",max:"5",value:o.popularity,onChange:e=>l((t=>d(d({},t),{},{popularity:parseInt(e.target.value)}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent"})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-4 pt-6",children:[(0,ox.jsxs)("label",{className:"flex items-center",children:[(0,ox.jsx)("input",{type:"checkbox",checked:o.high_margin,onChange:e=>l((t=>d(d({},t),{},{high_margin:e.target.checked}))),className:"mr-2"}),"\ud83d\udcb0 Alto margen"]}),(0,ox.jsxs)("label",{className:"flex items-center",children:[(0,ox.jsx)("input",{type:"checkbox",checked:o.is_active,onChange:e=>l((t=>d(d({},t),{},{is_active:e.target.checked}))),className:"mr-2"}),"\u2705 Activo"]})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sugerencias de upselling"}),(0,ox.jsx)("input",{type:"text",value:o.upselling_suggestions||"",onChange:e=>l((t=>d(d({},t),{},{upselling_suggestions:e.target.value}))),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent",placeholder:"Ej: Papas fritas, Bebida, Postre"})]})]}),(0,ox.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 mt-8",children:[(0,ox.jsx)("div",{className:"text-sm text-gray-500",children:"* Campos obligatorios"}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsx)("button",{onClick:()=>l(null),className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,ox.jsx)("button",{onClick:()=>(async e=>{try{await ix.put("".concat(Cx,"/menu/").concat(e.id),e),t((t=>t.map((t=>t.id===e.id?e:t)))),l(null),alert("\xa1Item actualizado exitosamente!")}catch(Jx){console.error("Error updating item:",Jx),alert("Error al actualizar el item. Intenta de nuevo.")}})(o),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-8 py-3 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 font-bold",children:"\u270f\ufe0f Actualizar Item"})]})]})]})})}),g&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-md",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"add"===b?"\u2795 Nueva Categor\xeda":"edit"===b?"\u270f\ufe0f Editar Categor\xeda":"\ud83d\udccb Duplicar Categor\xeda"}),(0,ox.jsx)("button",{onClick:()=>{f(!1),j(""),w(-1)},className:"text-gray-500 hover:text-gray-700 text-2xl",children:"\xd7"})]}),(0,ox.jsxs)("div",{className:"space-y-4",children:[(0,ox.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,ox.jsxs)("p",{className:"text-sm text-blue-800",children:["\ud83d\udca1 ",(0,ox.jsx)("strong",{children:"Gesti\xf3n de Categor\xedas:"})," Puedes crear, editar, duplicar o eliminar categor\xedas seg\xfan las necesidades de tu men\xfa. Las categor\xedas te ayudan a organizar mejor tus productos."]})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre de la categor\xeda"}),(0,ox.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Ej: Postres, Aperitivos, Especialidades",maxLength:"30"}),(0,ox.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"M\xe1ximo 30 caracteres"})]}),(0,ox.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,ox.jsx)("p",{children:(0,ox.jsx)("strong",{children:"Vista previa:"})}),(0,ox.jsx)("div",{className:"mt-2 p-2 bg-gray-50 rounded border",children:(0,ox.jsx)("span",{className:"px-4 py-2 bg-orange-500 text-white rounded-lg text-sm font-medium",children:y||"Nombre de categor\xeda"})})]}),s.length>1&&"edit"===b&&(0,ox.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:(0,ox.jsxs)("p",{className:"text-xs text-yellow-800",children:["\u26a0\ufe0f ",(0,ox.jsx)("strong",{children:"Nota:"})," Al editar esta categor\xeda, todos los items asociados mantendr\xe1n la nueva categor\xeda autom\xe1ticamente."]})})]}),(0,ox.jsxs)("div",{className:"flex justify-between items-center pt-6 border-t border-gray-200 mt-6",children:[(0,ox.jsxs)("div",{className:"text-sm text-gray-500",children:["Categor\xedas actuales: ",s.length]}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsx)("button",{onClick:()=>{f(!1),j(""),w(-1)},className:"bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"Cancelar"}),(0,ox.jsx)("button",{onClick:()=>{if(y.trim()){if("add"===b||"duplicate"===b){if(s.includes(y.trim()))return void alert("Ya existe una categor\xeda con ese nombre");n([...s,y.trim()])}else if("edit"===b){const e=[...s];e[N]=y.trim(),n(e)}f(!1),j(""),w(-1),alert("\u2705 Categor\xeda actualizada exitosamente")}else alert("Por favor ingresa un nombre para la categor\xeda")},disabled:!y.trim(),className:"bg-gradient-to-r from-orange-500 to-red-500 text-white px-6 py-3 rounded-lg hover:from-orange-600 hover:to-red-600 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed font-bold",children:"add"===b?"\u2795 Crear Categor\xeda":"edit"===b?"\u270f\ufe0f Actualizar Categor\xeda":"\ud83d\udccb Duplicar Categor\xeda"})]})]})]})})})]})},Gx=()=>{const[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)({ratingDistribution:{5:45,4:32,3:12,2:8,1:3},weeklyEvolution:[85,92,78,95,88,96,102],npsScore:8.4,npsChannels:{google_reviews:8.9,whatsapp:8.7,instagram:8.2,facebook:8.5,web:8.1,general:8.4},channelStats:{google_reviews:{count:234,avg_rating:4.6,growth:"+18%"},whatsapp:{count:156,avg_rating:4.4,growth:"+12%"},instagram:{count:98,avg_rating:4.2,growth:"+8%"},facebook:{count:72,avg_rating:4.3,growth:"+5%"},web:{count:45,avg_rating:4.1,growth:"+3%"}},keywords:[{word:"delicioso",count:45,sentiment:"positive"},{word:"excelente",count:38,sentiment:"positive"},{word:"r\xe1pido",count:32,sentiment:"positive"},{word:"calidad",count:28,sentiment:"positive"},{word:"espera",count:15,sentiment:"negative"}]}),[a,i]=(0,r.useState)("30d"),[o,l]=(0,r.useState)("all"),[c,u]=(0,r.useState)("all"),[m,h]=(0,r.useState)(!1),[p,x]=(0,r.useState)({google_reviews:{positive:"\xa1Gracias por tu excelente review! \ud83c\udf56 Nos emociona saber que disfrutaste la experiencia IL MANDORLA. \xa1Te esperamos pronto para seguir sorprendi\xe9ndote!",neutral:"Gracias por tu feedback. Nos encantar\xeda conocer m\xe1s detalles para mejorar tu experiencia. \xbfPodr\xedas contactarnos por WhatsApp?",negative:"Lamentamos que tu experiencia no haya sido la esperada. Tu opini\xf3n es muy importante para nosotros. Te contactaremos pronto para solucionarlo."},whatsapp:{positive:"\xa1Gracias por elegirnos! \ud83d\udd25 Nos alegra que hayas disfrutado. Tienes 50 puntos KUMIA de regalo.",neutral:"Gracias por tu feedback. \xbfHay algo espec\xedfico que podamos mejorar?",negative:"Disculpa la molestia. \xbfPodr\xedas contarnos qu\xe9 pas\xf3? Queremos solucionarlo inmediatamente."},instagram:{positive:"\xa1Gracias por compartir tu experiencia! \ud83d\udcf8 Tag a un amigo para que tambi\xe9n pruebe nuestras carnes ahumadas.",neutral:"\xa1Gracias por visitarnos! \xbfQu\xe9 te gustar\xeda probar en tu pr\xf3xima visita?",negative:"Lamentamos que no hayamos cumplido tus expectativas. Te enviamos un DM para solucionarlo."},facebook:{positive:"\xa1Gracias por tu review! \ud83d\ude4c No olvides seguirnos para enterarte de nuestras promociones especiales.",neutral:"Gracias por tu comentario. \xa1Esperamos verte pronto!",negative:"Disculpa cualquier inconveniente. Nos contactamos contigo por privado."},web:{positive:"\xa1Excelente! Gracias por tu feedback. Te invitamos a registrarte en KUMIA para ganar puntos.",neutral:"Gracias por tu opini\xf3n. \xbfTe gustar\xeda recibir nuestras promociones especiales?",negative:"Lamentamos tu experiencia. Te contactaremos para mejorar nuestro servicio."}});(0,r.useEffect)((()=>{f(),g()}),[]);const g=()=>{t([{id:"fb_1",customer_name:"Mar\xeda L\xf3pez",rating:5,comment:"Incre\xedble experiencia! Las carnes ahumadas est\xe1n espectaculares. Definitivamente volver\xe9.",date:"2025-01-22",channel:"google_reviews",response_sent:!1,sentiment:"positive"},{id:"fb_2",customer_name:"Carlos Ruiz",rating:5,comment:"El Brooklyn sandwich es lo mejor que he probado. Servicio excelente y ambiente perfecto.",date:"2025-01-21",channel:"google_reviews",response_sent:!0,sentiment:"positive"},{id:"fb_3",customer_name:"Ana Garc\xeda",rating:4,comment:"Muy buena comida, aunque tuvimos que esperar un poco. Las costillas baby ribs est\xe1n perfectas.",date:"2025-01-20",channel:"google_reviews",response_sent:!1,sentiment:"positive"},{id:"fb_4",customer_name:"Roberto Silva",rating:5,comment:"Trabajo cerca y vengo seguido. Siempre me sorprenden con la calidad y el sabor ahumado.",date:"2025-01-19",channel:"google_reviews",response_sent:!0,sentiment:"positive"},{id:"fb_5",customer_name:"Patricia M\xe9ndez",rating:3,comment:"La comida est\xe1 bien, pero el precio me parece un poco alto para la porci\xf3n.",date:"2025-01-18",channel:"google_reviews",response_sent:!1,sentiment:"neutral"},{id:"fb_6",customer_name:"Diego Paredes",rating:5,comment:"Fant\xe1stico para reuniones de trabajo. El ambiente es perfecto y la comida incre\xedble.",date:"2025-01-17",channel:"whatsapp",response_sent:!0,sentiment:"positive"}])},f=async()=>{try{const e=await ix.get("".concat(Cx,"/feedback"));e.data&&e.data.length>0&&t(e.data)}catch(Jx){console.error("Error fetching feedback:",Jx)}},b=e=>{let{rating:t,count:s,percentage:n}=e;return(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 hover:shadow-md transition-all duration-200",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"text-2xl mr-2",children:"\u2b50"}),(0,ox.jsx)("span",{className:"text-lg font-bold",children:t})]}),(0,ox.jsxs)("div",{className:"text-right",children:[(0,ox.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s}),(0,ox.jsxs)("div",{className:"text-sm text-gray-600",children:[n,"%"]})]})]}),(0,ox.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,ox.jsx)("div",{className:"bg-gradient-to-r from-orange-400 to-red-400 h-2 rounded-full transition-all duration-500",style:{width:"".concat(n,"%")}})})]})};return(0,ox.jsxs)("div",{id:"feedback_module",className:"space-y-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"\ud83d\udcac Feedback"}),(0,ox.jsx)("p",{className:"text-gray-600 mt-1",children:"Recolecta, entiende y acciona feedback autom\xe1ticamente"})]}),(0,ox.jsxs)("div",{className:"flex space-x-3",children:[(0,ox.jsx)("button",{onClick:()=>{const t="data:text/csv;charset=utf-8,"+e.map((e=>"".concat(e.customer_name,",").concat(e.rating,",").concat(e.comment,",").concat(e.date))).join("\n"),s=encodeURI(t),n=document.createElement("a");n.setAttribute("href",s),n.setAttribute("download","feedback_export.csv"),document.body.appendChild(n),n.click()},className:"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors",children:"\ud83d\udce4 Exportar Feedback"}),(0,ox.jsx)("button",{onClick:()=>{h(!0)},className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-4 py-2 rounded-lg hover:from-green-600 hover:to-emerald-600 transition-all duration-200",children:"\u2699\ufe0f Configurar Respuestas Autom\xe1ticas"})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83c\udfaf Filtros Avanzados"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha"}),(0,ox.jsxs)("select",{value:a,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,ox.jsx)("option",{value:"7d",children:"\xdaltimos 7 d\xedas"}),(0,ox.jsx)("option",{value:"30d",children:"\xdaltimos 30 d\xedas"}),(0,ox.jsx)("option",{value:"90d",children:"\xdaltimos 90 d\xedas"})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Canal"}),(0,ox.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,ox.jsx)("option",{value:"all",children:"Todos los canales"}),(0,ox.jsx)("option",{value:"google_reviews",children:"\ud83c\udf1f Google Reviews"}),(0,ox.jsx)("option",{value:"whatsapp",children:"WhatsApp"}),(0,ox.jsx)("option",{value:"instagram",children:"Instagram"}),(0,ox.jsx)("option",{value:"facebook",children:"Facebook"}),(0,ox.jsx)("option",{value:"web",children:"Web"})]})]}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Satisfacci\xf3n"}),(0,ox.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-500",children:[(0,ox.jsx)("option",{value:"all",children:"Todos los niveles"}),(0,ox.jsx)("option",{value:"positive",children:"Positivos (4-5\u2b50)"}),(0,ox.jsx)("option",{value:"neutral",children:"Neutros (3\u2b50)"}),(0,ox.jsx)("option",{value:"negative",children:"Negativos (1-2\u2b50)"})]})]})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcca NPS General + Por Canal"}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-yellow-50 to-amber-50 p-4 rounded-lg text-center border-2 border-yellow-300",children:[(0,ox.jsx)("div",{className:"text-xl mb-1",children:"\ud83c\udf1f"}),(0,ox.jsx)("div",{className:"text-3xl font-bold text-amber-600",children:s.npsChannels.google_reviews}),(0,ox.jsx)("div",{className:"text-sm text-amber-700 font-medium",children:"Google Reviews"}),(0,ox.jsx)("div",{className:"text-xs text-amber-600 mt-1",children:"Canal Principal"})]}),(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-4 rounded-lg text-center",children:[(0,ox.jsx)("div",{className:"text-3xl font-bold text-green-600",children:s.npsScore}),(0,ox.jsx)("div",{className:"text-sm text-green-700",children:"NPS General"})]}),Object.entries(s.npsChannels).filter((e=>{let[t]=e;return"google_reviews"!==t&&"general"!==t})).map((e=>{let[t,s]=e;return(0,ox.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-center",children:[(0,ox.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:s}),(0,ox.jsx)("div",{className:"text-sm text-blue-700 capitalize",children:t})]},t)}))]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 Estad\xedsticas Detalladas por Canal"}),(0,ox.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(s.channelStats).map((e=>{let[t,s]=e;return(0,ox.jsxs)("div",{className:"p-4 rounded-lg border-l-4 ".concat("google_reviews"===t?"bg-yellow-50 border-yellow-400":"bg-gray-50 border-gray-300"),children:[(0,ox.jsxs)("div",{className:"flex items-center mb-2",children:[(0,ox.jsx)("span",{className:"text-lg mr-2",children:"google_reviews"===t?"\ud83c\udf1f":"whatsapp"===t?"\ud83d\udcf1":"instagram"===t?"\ud83d\udcf7":"facebook"===t?"\ud83d\udc65":"\ud83c\udf10"}),(0,ox.jsx)("h4",{className:"font-medium text-gray-800 capitalize",children:"google_reviews"===t?"Google Reviews":t})]}),(0,ox.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Reviews:"}),(0,ox.jsx)("span",{className:"font-bold",children:s.count})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Rating:"}),(0,ox.jsxs)("span",{className:"font-bold text-yellow-600",children:[s.avg_rating," \u2b50"]})]}),(0,ox.jsxs)("div",{className:"flex justify-between",children:[(0,ox.jsx)("span",{className:"text-gray-600",children:"Crecimiento:"}),(0,ox.jsx)("span",{className:"font-bold text-green-600",children:s.growth})]})]})]},t)}))})]}),(0,ox.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:Object.entries(s.ratingDistribution).reverse().map((e=>{let[t,s]=e;return(0,ox.jsx)(b,{rating:t,count:s,percentage:s/100*100},t)}))}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcc8 Evoluci\xf3n del Sentimiento (IA)"}),(0,ox.jsx)("div",{className:"flex items-end justify-between h-32",children:s.weeklyEvolution.map(((e,t)=>(0,ox.jsxs)("div",{className:"flex flex-col items-center",children:[(0,ox.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:e}),(0,ox.jsx)("div",{className:"bg-gradient-to-t from-orange-400 to-red-400 rounded-t-lg transition-all duration-500",style:{height:"".concat(e/120*100,"%"),width:"20px"}}),(0,ox.jsx)("span",{className:"text-xs text-gray-600 mt-1",children:["Lun","Mar","Mi\xe9","Jue","Vie","S\xe1b","Dom"][t]})]},t)))}),(0,ox.jsxs)("div",{className:"mt-4 flex items-center justify-between",children:[(0,ox.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,ox.jsx)("span",{className:"font-medium",children:"Tendencia:"}),(0,ox.jsx)("span",{className:"text-green-600 ml-1",children:"\u2197\ufe0f Positiva (+8.2%)"})]}),(0,ox.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,ox.jsx)("span",{className:"font-medium",children:"Promedio:"}),Math.round(s.weeklyEvolution.reduce(((e,t)=>e+t),0)/s.weeklyEvolution.length)]})]})]}),(0,ox.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udd24 Nube de Palabras Clave (NLP)"}),(0,ox.jsx)("div",{className:"flex flex-wrap gap-2",children:s.keywords.map((e=>(0,ox.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat("positive"===e.sentiment?"bg-green-100 text-green-800":"negative"===e.sentiment?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),style:{fontSize:"".concat(Math.max(12,e.count/3),"px")},children:[e.word," (",e.count,")"]},e.word)))})]}),(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 rounded-xl p-6 border border-indigo-100",children:[(0,ox.jsxs)("div",{className:"flex items-center mb-4",children:[(0,ox.jsx)("span",{className:"text-2xl mr-3",children:"\ud83e\udd16"}),(0,ox.jsx)("h3",{className:"text-lg font-bold text-indigo-800",children:"An\xe1lisis IA + Recomendaciones"})]}),(0,ox.jsxs)("div",{className:"space-y-3",children:[(0,ox.jsxs)("p",{className:"text-indigo-700 text-sm",children:[(0,ox.jsx)("strong",{children:"NPS Score:"})," ",s.npsScore,"/10 (Excelente)"]}),(0,ox.jsxs)("p",{className:"text-indigo-700 text-sm",children:[(0,ox.jsx)("strong",{children:"Temas frecuentes:"})," Calidad de comida (+), Velocidad de servicio (+), Tiempo de espera (-)"]}),(0,ox.jsx)("div",{className:"bg-yellow-50 p-3 rounded-lg",children:(0,ox.jsxs)("p",{className:"text-yellow-800 text-sm",children:[(0,ox.jsx)("strong",{children:"\ud83d\udd0d Recomendaci\xf3n Detectada:"})," Detectamos quejas sobre espera \u2192 activa recordatorio de puntualidad"]})})]}),(0,ox.jsx)("button",{className:"w-full mt-4 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-all duration-200",children:"Aplicar Recomendaci\xf3n"})]})]}),(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,ox.jsx)("h3",{className:"text-lg font-bold text-gray-800 mb-4",children:"\ud83d\udcac Feedback Reciente"}),(0,ox.jsx)("div",{className:"space-y-4",children:e.filter((e=>"all"===o||e.channel===o)).slice(0,6).map((e=>(0,ox.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,ox.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-400 rounded-full flex items-center justify-center mr-3",children:(0,ox.jsx)("span",{className:"text-white font-bold text-sm",children:e.customer_name.charAt(0)})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h4",{className:"font-medium text-gray-800",children:e.customer_name}),(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"flex mr-2",children:[...Array(5)].map(((t,s)=>(0,ox.jsx)("span",{className:"text-sm ".concat(s<e.rating?"text-yellow-400":"text-gray-300"),children:"\u2b50"},s)))}),(0,ox.jsx)("span",{className:"text-xs text-gray-500",children:e.date})]})]})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,ox.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("google_reviews"===e.channel?"bg-yellow-100 text-yellow-800":"whatsapp"===e.channel?"bg-green-100 text-green-800":"instagram"===e.channel?"bg-pink-100 text-pink-800":"facebook"===e.channel?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:"google_reviews"===e.channel?"\ud83c\udf1f Google":"whatsapp"===e.channel?"\ud83d\udcf1 WhatsApp":"instagram"===e.channel?"\ud83d\udcf7 Instagram":"facebook"===e.channel?"\ud83d\udc65 Facebook":"\ud83c\udf10 Web"}),e.response_sent&&(0,ox.jsx)("span",{className:"px-2 py-1 bg-green-100 text-green-800 rounded-full text-xs",children:"\u2705 Respondido"})]})]}),(0,ox.jsx)("p",{className:"text-gray-700 text-sm mb-3",children:e.comment}),!e.response_sent&&(0,ox.jsxs)("div",{className:"flex space-x-2",children:[(0,ox.jsx)("button",{onClick:()=>(async(e,s,n)=>{try{var r;const a=null===(r=p[s])||void 0===r?void 0:r[n];if(!a)return void alert("No hay respuesta autom\xe1tica configurada para este canal y sentimiento");await ix.post("".concat(Cx,"/send-feedback-response"),{feedback_id:e,channel:s,message:a}),t((t=>t.map((t=>t.id===e?d(d({},t),{},{response_sent:!0,auto_response:a}):t)))),alert("\u2705 Respuesta autom\xe1tica enviada exitosamente via ".concat(s))}catch(Jx){console.error("Error sending auto response:",Jx),alert("Error al enviar respuesta autom\xe1tica")}})(e.id,e.channel,e.rating>=4?"positive":3===e.rating?"neutral":"negative"),className:"bg-green-100 text-green-700 px-3 py-1 rounded-lg text-sm hover:bg-green-200 transition-colors",children:"\ud83e\udd16 Respuesta Autom\xe1tica"}),(0,ox.jsx)("button",{onClick:()=>{return t=e.id,void alert("Respondiendo con recompensa autom\xe1tica al feedback ".concat(t));var t},className:"bg-purple-100 text-purple-700 px-3 py-1 rounded-lg text-sm hover:bg-purple-200 transition-colors",children:"\ud83c\udf81 Responder + Recompensa"})]}),e.auto_response&&(0,ox.jsx)("div",{className:"mt-3 bg-green-50 p-3 rounded-lg border-l-4 border-green-400",children:(0,ox.jsxs)("p",{className:"text-green-800 text-sm",children:[(0,ox.jsx)("strong",{children:"Respuesta enviada:"})," ",e.auto_response]})})]},e.id)))})]}),m&&(0,ox.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,ox.jsx)("div",{className:"bg-white rounded-xl shadow-xl w-full max-w-6xl max-h-screen overflow-y-auto",children:(0,ox.jsxs)("div",{className:"p-6",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"\u2699\ufe0f Configurar Respuestas Autom\xe1ticas"}),(0,ox.jsx)("p",{className:"text-gray-600",children:"Personaliza las respuestas autom\xe1ticas por canal y tipo de sentimiento"})]}),(0,ox.jsx)("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\u2715"})]}),(0,ox.jsx)("div",{className:"space-y-6",children:Object.entries(p).map((e=>{let[t,s]=e;return(0,ox.jsxs)("div",{className:"border border-gray-200 rounded-xl p-6",children:[(0,ox.jsxs)("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center",children:[(0,ox.jsx)("span",{className:"mr-2",children:"google_reviews"===t?"\ud83c\udf1f":"whatsapp"===t?"\ud83d\udcf1":"instagram"===t?"\ud83d\udcf7":"facebook"===t?"\ud83d\udc65":"\ud83c\udf10"}),"google_reviews"===t?"Google Reviews":t.charAt(0).toUpperCase()+t.slice(1)]}),(0,ox.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:Object.entries(s).map((e=>{let[s,n]=e;return(0,ox.jsxs)("div",{className:"space-y-2",children:[(0,ox.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"positive"===s?"\ud83d\ude0a Positivo (4-5\u2b50)":"neutral"===s?"\ud83d\ude10 Neutral (3\u2b50)":"\ud83d\ude1e Negativo (1-2\u2b50)"}),(0,ox.jsx)("textarea",{value:n,onChange:e=>x((n=>d(d({},n),{},{[t]:d(d({},n[t]),{},{[s]:e.target.value})}))),rows:"4",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"}),(0,ox.jsx)("button",{onClick:()=>(async(e,t,s)=>{try{const n=d(d({},p),{},{[e]:d(d({},p[e]),{},{[t]:s})});x(n),await ix.post("".concat(Cx,"/auto-responses"),{channel:e,sentiment:t,message:s}),alert("\u2705 Respuesta autom\xe1tica para ".concat(e," (").concat(t,") guardada exitosamente"))}catch(Jx){console.error("Error saving auto response:",Jx),alert("Error al guardar respuesta autom\xe1tica")}})(t,s,p[t][s]),className:"w-full bg-blue-100 text-blue-700 px-3 py-2 rounded-lg text-sm hover:bg-blue-200 transition-colors",children:"\ud83d\udcbe Guardar"})]},s)}))})]},t)}))}),(0,ox.jsx)("div",{className:"flex justify-center pt-6 border-t border-gray-200 mt-8",children:(0,ox.jsx)("button",{onClick:()=>h(!1),className:"bg-gray-500 text-white px-8 py-3 rounded-lg hover:bg-gray-600 transition-colors",children:"Cerrar Configuraci\xf3n"})})]})})})]})},Kx=()=>{const{user:e,logout:t}=Mx(),[s,n]=(0,r.useState)("dashboard"),[a,i]=(0,r.useState)({}),[o,l]=(0,r.useState)(!0),[c,u]=(0,r.useState)((()=>{const e=localStorage.getItem("restaurantConfig");return e?JSON.parse(e):{name:"IL MANDORLA",logo:null,nameChanges:0,lastNameChange:null,canChangeName:!0}})),m=()=>{if(c.nameChanges<3)return!0;if(!c.lastNameChange)return!0;return Math.floor((Date.now()-new Date(c.lastNameChange))/864e5)>=90},h=e=>{const t=d(d(d({},c),e),{},{nameChanges:e.name!==c.name&&m()?c.nameChanges>=3?1:c.nameChanges+1:c.nameChanges,lastNameChange:e.name!==c.name?(new Date).toISOString():c.lastNameChange});u(t),localStorage.setItem("restaurantConfig",JSON.stringify(t))};(0,r.useEffect)((()=>{p()}),[]);const p=async()=>{try{const e=await ix.get("".concat(Cx,"/dashboard/metrics"));i(e.data)}catch(Jx){console.error("Error fetching metrics:",Jx)}finally{l(!1)}};return(0,ox.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,ox.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-10",children:(0,ox.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,ox.jsxs)("div",{className:"flex justify-between items-center py-4",children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-orange-500 to-red-500 rounded-xl flex items-center justify-center mr-4 shadow-lg overflow-hidden",children:c.logo?(0,ox.jsx)("img",{src:c.logo,alt:"Logo",className:"w-full h-full object-cover rounded-xl"}):(0,ox.jsx)("span",{className:"text-white font-bold text-lg",children:c.name.split(" ").map((e=>e[0])).join("").slice(0,2)})}),(0,ox.jsxs)("div",{children:[(0,ox.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:c.name}),(0,ox.jsx)("p",{className:"text-sm text-gray-600",children:"Powered by KumIA Technology"})]})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,ox.jsxs)("div",{className:"flex items-center bg-green-100 text-green-800 px-3 py-1 rounded-full text-sm",children:[(0,ox.jsxs)("div",{className:"flex items-center justify-center space-x-2",children:[(0,ox.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),(0,ox.jsx)("span",{className:"text-green-600 font-bold roi-value",children:"ROI +4.3%"}),(0,ox.jsx)("button",{onClick:()=>{const e=(.5*Math.random()-.25+4.3).toFixed(1);document.querySelector(".roi-value").textContent="ROI +".concat(e,"%"),document.querySelector(".last-update").textContent="Actualizado ahora",setTimeout((()=>{document.querySelector(".last-update").textContent="Hace 24 horas"}),3e3)},className:"ml-2 text-gray-400 hover:text-green-600 transition-colors p-1 rounded-full hover:bg-green-50",title:"Actualizar ROI",children:"\ud83d\udd04"})]}),(0,ox.jsx)("div",{className:"text-xs text-gray-500 last-update",children:"Hace 24 horas"})]}),(0,ox.jsxs)("div",{className:"flex items-center space-x-2",children:[(null===e||void 0===e?void 0:e.picture)&&(0,ox.jsx)("img",{src:e.picture,alt:e.name,className:"w-8 h-8 rounded-full"}),(0,ox.jsxs)("div",{className:"text-right",children:[(0,ox.jsx)("p",{className:"text-sm font-medium text-gray-900",children:null===e||void 0===e?void 0:e.name}),(0,ox.jsx)("p",{className:"text-xs text-gray-500",children:null===e||void 0===e?void 0:e.role})]})]}),(0,ox.jsx)("button",{onClick:t,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-all duration-200 transform hover:scale-105",children:"Cerrar Sesi\xf3n"})]})]})})}),(0,ox.jsxs)("div",{className:"flex",children:[(0,ox.jsxs)("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200 min-h-screen",children:[(0,ox.jsx)("nav",{className:"p-4 space-y-2",children:[{id:"dashboard",label:"Dashboard",icon:"\ud83d\udcc8",badge:"NEW"},{id:"menu",label:"Men\xfa",icon:"\ud83c\udf7d\ufe0f",badge:null},{id:"clients",label:"Clientes",icon:"\ud83d\udc65",badge:"48"},{id:"feedback",label:"Feedback",icon:"\ud83d\udcac",badge:"12"},{id:"reservations",label:"Reservas",icon:"\ud83d\udcc5",badge:"5"},{id:"ai-agents",label:"Agentes IA",icon:"\ud83e\udd16",badge:"4"},{id:"centro-ia-marketing",label:"Centro IA Marketing",icon:"\ud83e\udde9",badge:"AI"},{id:"inteligencia-competitiva",label:"Inteligencia Competitiva",icon:"\ud83e\udde0",badge:"INTEL"},{id:"juegos-multijugador",label:"Juegos Multijugador",icon:"\ud83c\udfae",badge:"47"},{id:"gestion-garzon-webapp",label:"Gesti\xf3n Garz\xf3n WebApp",icon:"\ud83d\udc68\u200d\ud83d\udcbc",badge:"TEAM"},{id:"rewards",label:"Recompensas",icon:"\ud83c\udf81",badge:null},{id:"roi-viewer",label:"ROI Viewer",icon:"\ud83d\udcca",badge:"+4.3x"},{id:"integrations",label:"Integraciones",icon:"\ud83d\udd17",badge:"2/5"},{id:"tu-facturacion-kumia",label:"Tu Facturaci\xf3n KumIA",icon:"\ud83d\udcb3",badge:"$180K"},{id:"settings",label:"Configuraci\xf3n",icon:"\u2699\ufe0f",badge:null}].map((e=>(0,ox.jsxs)("button",{onClick:()=>n(e.id),className:"w-full flex items-center justify-between px-4 py-3 rounded-xl text-left transition-all duration-200 ".concat(s===e.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg transform scale-105":"text-gray-700 hover:bg-gray-100"),children:[(0,ox.jsxs)("div",{className:"flex items-center",children:[(0,ox.jsx)("span",{className:"mr-3 text-xl",children:e.icon}),(0,ox.jsx)("span",{className:"font-medium",children:e.label})]}),e.badge&&(0,ox.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat(s===e.id?"bg-white bg-opacity-20 text-white":"bg-gray-200 text-gray-700"),children:e.badge})]},e.id)))}),(0,ox.jsx)("div",{className:"p-4 mt-8",children:(0,ox.jsxs)("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl p-4 text-white",children:[(0,ox.jsx)("h3",{className:"font-bold mb-2",children:"\ud83d\ude80 Expandir KUMIA"}),(0,ox.jsx)("p",{className:"text-sm mb-3 opacity-90",children:"Con tu ROI de +4.3x, es momento de crecer"}),(0,ox.jsx)("button",{className:"w-full bg-white text-gray-700 px-3 py-2 rounded-lg text-sm font-medium hover:bg-gray-100 transition-colors border border-gray-200",children:"Abrir Nuevo Local"})]})})]}),(0,ox.jsx)("div",{className:"flex-1 p-6",children:o?(0,ox.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,ox.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500"})}):(()=>{switch(s){case"dashboard":return(0,ox.jsx)(qx,{metrics:a});case"menu":return(0,ox.jsx)(Hx,{});case"clients":return(0,ox.jsx)(px,{});case"feedback":return(0,ox.jsx)(Gx,{});case"reservations":return(0,ox.jsx)(xx,{});case"ai-agents":return(0,ox.jsx)(gx,{});case"centro-ia-marketing":return(0,ox.jsx)(lx,{});case"inteligencia-competitiva":return(0,ox.jsx)(fx,{});case"juegos-multijugador":return(0,ox.jsx)(bx,{});case"gestion-garzon-webapp":return(0,ox.jsx)(vx,{});case"rewards":return(0,ox.jsx)(ux,{});case"roi-viewer":return(0,ox.jsx)(dx,{});case"integrations":return(0,ox.jsx)(mx,{});case"tu-facturacion-kumia":return(0,ox.jsx)(yx,{});case"settings":return(0,ox.jsx)(hx,{restaurantConfig:c,updateRestaurantConfig:h,canChangeName:m()});default:return(0,ox.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[(0,ox.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udea7"}),(0,ox.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-2",children:"M\xf3dulo en construcci\xf3n"}),(0,ox.jsx)("p",{className:"text-gray-600",children:"Esta secci\xf3n estar\xe1 disponible pronto"})]})}})()})]})]})},Wx=()=>{const{isAuthenticated:e}=Mx(),{isOnline:t,firebaseReady:s}=(()=>{const e=(0,r.useContext)(Px);if(!e)throw new Error("useFirebase must be used within a FirebaseProvider");return e})();return(0,ox.jsxs)("div",{children:[t?s?null:(0,ox.jsx)("div",{className:"bg-blue-50 border border-blue-200 p-3 text-center",children:(0,ox.jsx)("span",{className:"text-blue-800",children:"\ud83d\udd04 Conectando a Firebase..."})}):(0,ox.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 p-3 text-center",children:(0,ox.jsx)("span",{className:"text-yellow-800",children:"\u26a0\ufe0f Modo offline - Funcionalidad limitada"})}),e?(0,ox.jsx)(Kx,{}):(0,ox.jsx)(Lx,{})]})},$x=()=>(0,ox.jsx)(p,{clientId:"284445869651-ets9s29v4f3ljj02qveq9lqlmj88npkl.apps.googleusercontent.com",children:(0,ox.jsx)(Rx,{children:(0,ox.jsx)(Dx,{children:(0,ox.jsx)("div",{className:"App",children:(0,ox.jsx)(Wx,{})})})})});a.createRoot(document.getElementById("root")).render((0,ox.jsx)(r.StrictMode,{children:(0,ox.jsx)($x,{})}))})();
//# sourceMappingURL=main.f239a9d4.js.map